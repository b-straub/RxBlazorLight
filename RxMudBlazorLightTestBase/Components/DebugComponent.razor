<PageTitle>Debug</PageTitle>

<MudStack AlignItems=@AlignItems.Start>
    <RxBLStateSubscriber Service=@Service IDs=@([Service.CountState.ID, Service.ServiceState.ID])>
        <DisplayRenderCycle>
            <MudText Typo="Typo.h3" GutterBottom="true">@Service.CountState.Value</MudText>
        </DisplayRenderCycle>
        <DisplayRenderCycle>
            <MudButtonRx Color="Color.Primary" Variant="Variant.Filled" State=@Service.CountState ChangeState=@TestService.IncrementCounter CanChange=@Service.IncrementStateCanChange>Increment</MudButtonRx>
        </DisplayRenderCycle>
    </RxBLStateSubscriber>

    <RxBLStateSubscriber Service=@Service IDs=@([Service.ServiceState.ID])>
        <DisplayRenderCycle>
            <MudText Typo="Typo.h3" GutterBottom="true">@Service.ServiceState.Value.State</MudText>
        </DisplayRenderCycle>

        <DisplayRenderCycle>
            <MudButtonRx Color="Color.Warning" Variant="Variant.Filled" State=@Service.ServiceState ChangeState=@(s => s.Value = s.Value with { State = "Test" })>Change State to Test</MudButtonRx>
        </DisplayRenderCycle>
    </RxBLStateSubscriber>
</MudStack>

@code {
    [Inject]
    public required TestService Service { get; init; }
}
